@model OdsResidentsEnrolledElsewhereReportViewModel

<div id="pagetop" class="row tbmargin10">
    <div class="col-md-1"><a href="#notes">See notes</a></div>
    @if (Model.IsStateMode)
    {
        <div class="col-md-2"><a href="@Url.Action("ResidentsEnrolledElsewhereReport", "Ods", new { isStateMode = false })" class="show-data-loading">View Single District</a></div>
    }
    else
    {
        <div class="col-md-2"><a href="@Url.Action("ResidentsEnrolledElsewhereReport", "Ods", new { isStateMode = true })" class="show-data-loading">View All Districts</a></div>
    }
</div>
<div class="row tbmargin10">
    @if (Model.IsStateMode)
    {
        <div class="vp-body-header justify-content-start align-self-center">Residents Enrolled Elsewhere for All Minnesota Districts</div>
    }
    else
    {
        <div class="vp-body-header justify-content-start align-self-center">Residents Enrolled Elsewhere for District @Model.EdOrgName (@Model.EdOrgId.ToString())</div>
    }
</div>
<div id="requestedReportContent" class="row">
    <table class="table table-sm table-responsive-md table-bordered" id="reportsTable">
        <tr class="table-primary">
            <th>ID</th>
            <th>Resident District</th>
            <th>District of Enrollment ID</th>
            <th>District of Enrollment</th>
            <th>Residents Enrolled</th>
        </tr>
        @foreach (var result in Model.Results)
        {
            <tr>
                <td>
                    @if (Model.IsStateMode)
                    {
                        if (result.EdOrgId.HasValue && result.OrgType == OrgType.District)
                        {
                            <a href="@Url.Action("ResidentsEnrolledElsewhereReport", "Ods", new { isStateMode = false, districtToDisplay = result.EdOrgId.Value})" class="show-data-loading">@(result.EdOrgId.Value.ToString())</a>
                        }
                        else
                        {
                            @(result.EdOrgId.HasValue ? result.EdOrgId.Value.ToString() : string.Empty)
                        }
                    }
                    else
                    {
                        @(result.EdOrgId.HasValue ? result.EdOrgId.Value.ToString() : string.Empty)
                    }
                </td>
                <td>@(result.EdOrgName)</td>
                <td>@(result.DistrictOfEnrollmentId.ToString())</td>
                <td>@(result.DistrictOfEnrollmentName)</td>
                <td><a href="@Url.Action("ResidentsEnrolledElsewhereReport", "Ods", new { isStateMode = false, districtToDisplay = result.EdOrgId.Value, isStudentDrillDown = true})" target="_blank">@(result.ResidentsEnrolled.ToString())</a></td>
            </tr>
        }
    </table>
    @if (Model.Results.Count == 0)
    {
        <div class="vp-body-header col-8 justify-content-start align-self-center">No records were found.</div>
    }
</div>
<div id="notes" class="row">
    <div class="vp-body-header">Notes:</div>
</div>
<div class="row">The district where the student resides is determined from the student-school association extensions in the Ed Fi ODS database.</div>
<div class="row tbmargin10">
    <div  class="col-md-2">
        <a href="#pagetop">Back to Top</a>
    </div>
</div>


@section scripts {
    <script>
    </script>
}