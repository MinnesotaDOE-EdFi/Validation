ruleset PartBReferral


rule 281.1
	when {PartBReferral} exists then
	require {EarlyOn} exists
	else 'When a record includes the Part B Referral component, the Early On component is also required.'

rule 281.2 
	when {PartBReferral} exists then
	require years since {PersonalCore}.[DateOfBirth] as of AsOfDate >= '2'
	else 'Transition from Part C services does not occur until the child is 2 years of age or older.'	

/*  ParentAddressUnknown rules */		
rule 281.538.1
	when {PartBReferral}.[ParentStreetAddress] does not exist
	or {PartBReferral}.[ParentCity] does not exist
	or {PartBReferral}.[ParentZipCode] does not exist then
	require {PartBReferral}.[ParentAddressUnknown] = 'True'
	else 'The parent`s address is required unless he/she does not have an address where they can receive mail.'


/* ParentCity  rules */		
rule 281.534.1
	when {PartBReferral}.[ParentAddressUnknown] = 'True' then
	require {PartBReferral}.[ParentCity] does not exist
	else 'If the parent`s address is unknown, Parent City cannot be submitted.'


/*  ParentPhoneNumber rules */		
rule 281.537.1
	when {PartBReferral}.[ParentPhoneUnknown] = 'True' then
	require {PartBReferral}.[ParentPhoneNumber] does not exist
	else 'If the parent`s phone number is unknown, Parent Phone Number cannot be submitted.'


/*  ParentPhoneUnknown rules */		
rule 281.539.1
	when {PartBReferral}.[ParentPhoneNumber] does not exist then
	require {PartBReferral}.[ParentPhoneUnknown] = 'True'
	else 'The parent`s phone number is required unless he/she doesn`t have a telephone number where they can receive calls.'


/*  ParentState rules */		
rule 281.535.1
	when {PartBReferral}.[ParentAddressUnknown] = 'True' then
	require {PartBReferral}.[ParentState] does not exist
	else 'If the parent`s address is unknown, Parent State cannot be submitted.'


/*  ParentStreetAddress rules */		
rule 281.532.1
	when {PartBReferral}.[ParentAddressUnknown] = 'True' then
	require {PartBReferral}.[ParentStreetAddress] does not exist
	else 'If the parent`s address is unknown, a Parent Street Address cannot be submitted.'


/*  ParentStreetAddress2 rules */		
rule 281.533.1
	when {PartBReferral}.[ParentStreetAddress] does not exist then
	require {PartBReferral}.[ParentStreetAddress2] does not exist
	else 'This characteristic may not be submitted if Parent Street Address is blank.'
	
rule 281.533.2 
	when {PartBReferral}.[ParentAddressUnknown] = 'True' then
	require {PartBReferral}.[ParentStreetAddress2] does not exist
	else 'If the parent`s address is unknown, Parent Street Address 2 cannot be submitted.'


/*  ParentZipCode rules */		
rule 281.536.1
	when {PartBReferral}.[ParentAddressUnknown] = 'True' then
	require {PartBReferral}.[ParentZipCode] does not exist
	else 'If the parent`s address is unknown, Parent Zip Code cannot be submitted.'