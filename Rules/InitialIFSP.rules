ruleset InitialIFSP

rule 270.1
	when {InitialIFSP} exists then
	require {EEM}.[EntityTypeCategory] = '2'
	else 'This component can only be submitted by an entity with an EEM entity type of ISD.'
	
rule 270.2 
	when {InitialIFSP} exists then
	expect {EarlyOn} exist
	else 'When a record includes the Initial IFSP component the Early On component is also required.'
	
	
/* IFSPTimeliness */
rule 270.503.1
	when days since {InitialIFSP}.[ReferralDate] as of {InitialIFSP}.[InitialIFSPDate] > 45 then
	require {InitialIFSP}.[IFSPTimeliness] <> '01'
	else 'If the Initial IFSP Date is more than 45 calendar days past the Referral Date then IFSP Timeliness cannot be reported as Timely. '
	

/* InitialIFSPDate rules */		
rule 270.541.1
	require {InitialIFSP}.[InitialIFSPDate] >= {PersonalCore}.[DateOfBirth]
	else 'The Initial IFSP Date must be on or after the birthdate.'
	
rule 270.541.2 
	require {InitialIFSP}.[InitialIFSPDate] >= {PersonalCore}.[DateOfBirth]
	else 'The Initial IFSP Date must be on or after the Referral Date.'
	
rule 270.541.3
	require {InitialIFSP}.[InitialIFSPDate] <= AsOfDate
	else 'The Initial IFSP Date must be on or before the collection count date in the Fall and/or Spring General Collections. In the EOY General Collection it must be on or before June 30.'
	
rule 270.541.4
	require {InitialIFSP}.[InitialIFSPDate] <= {EarlyOn}.[CurrentIFSPDate]
	else 'The Initial IFSP Date must be on or before the Current IFSP Date.'
	

/* ReferralDate rules */		
rule 270.501.1
	require {InitialIFSP}.[ReferralDate] >= {PersonalCore}.[DateOfBirth]
	else 'The Referral Date cannot be prior to the birthdate.'
	
rule 270.501.2 
	require {InitialIFSP}.[ReferralDate] <= AsOfDate
	else 'The Referral Date must be on or before the collection count date.'
	
rule 270.501.3
	require years since {PersonalCore}.[DateOfBirth] as of {InitialIFSP}.[ReferralDate] <= '3'
	else 'Children older than 3 years of age are not eligible for Part C services.'
	
rule 270.501.4
	require {InitialIFSP}.[ReferralDate] <= today
	else 'The Referral Date cannot be a future date'


/* ResultOfInitialIFSP rules */		
rule 270.504.1
	when {InitialIFSP}.[ResultOfInitialIFSP] = '01' then
	expect {SpecialEducation} exists
	else 'The Special Education Component should be reported if special education services have started.'