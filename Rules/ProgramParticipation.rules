ruleset ProgramParticipation

/* ProgramEligibilityParticipation rules */

rule 219.317.1
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9230' then
	require {SchoolDemographics}.[GradeSetting] = '00'
	else 'When Developmental Kindergarten (9230) is reported the student must be in grade "00".'
	
rule 219.317.2 
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9110' then
	require {PersonalDemographics}.[ResidentLEANumber] does not exist
	else 'For an Out-of-State Resident, the Resident LEA Number must be blank.'
	
rule 219.317.3 
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9110' then
	require {GeneralEducationFTE}.[GeneralEdFTE] = '0'
	and {SpecialEducation}.[Section52FTE] = '0'
	and {SpecialEducation}.[Section53FTE] = '0'
	else 'The total FTE cannot be > 0.00 when a student is flagged as out-of-state resident.'
	
rule 219.317.4
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9130' then
	require years since {PersonalCore}.[DateOfBirth] as of 1-Sep >=3
	and years since {PersonalCore}.[DateOfBirth] as of 1-Sep <=21 
	else 'When Immigrant status (9130) is reported the student must be between 3 and 21 years of age as of September 1 of the current school year.'
	
rule 219.317.7
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '3500' then
	require {SchoolDemographics}.[GradeSetting] is in ['09','10','11','12']
	else 'When Early/Middle College (3500) is reported the student must be in grades 9 through 12.'
	
rule 219.317.8
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '3500' then
	require {Enrollment}.[DistrictExitStatus] is not in ['01','02','03','04','18','30']
	else 'When Early/Middle College (3500) is reported the student may not be reported with District Exit Status of "01" â€“ "04", "18", or "30".'

rule 219.317.9
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '3500' then
	require {EEM}.[SFNEarlyMiddleCollege] = 'true'
	else 'When Early/Middle College (3500) is reported then School Or Facility must have the Early/Middle College flag set in EEM.'	

rule 219.317.10
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9229' then
	expect count({ProgramParticipation} when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9220') >= '1'
	else 'When Program Eligibility Participation is submitted with code 9229, usually code 9220 (alternative education) is also reported.'
	
rule 219.317.11
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9229' then
	expect {SchoolDemographics}.[GradeSetting] is in ['09','10','11','12']
	else 'Seat-Time Waivers are generally approved for students in grades 9-12. Please confirm Student Residency and Grade or Setting are reported correctly.'
	
rule 219.317.12
	when {ProgramParticipation}.[ProgramEligibilityParticipation] is in ['9220','9229'] then
	expect {EEM}.[SFNAlternativeServices] exists
	else 'When a student is reported as an Alternative Education (9220) or Seat Time Waiver (9229) participant, the School Facility Number must offer alternative education services as reported in EEM.'
	
rule 219.317.13
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9130' then
	expect {TitleITAS} exists
	else 'Title I TAS component is usually submitted when "6010" code is submitted for Program Eligibility Participation characteristic.'
	
rule 219.317.14
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9130' then
	require {PersonalDemographics} exist
	else 'Personal Demographics component is required when "9130" code is submitted for Program Eligibility Participation characteristic.'
	
rule 219.317.16
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9220' then
	require {SchoolDemographics}.[GradeSetting] <> '20'
	else 'This student may not be reported as participating in both Alternative Education (9220) and Adult Education (grade 20).'
	
rule 219.317.17
	when collection is in [FallEarlyChildhood,SpringEarlyChildhood,EOPEarlyChildhood] then
	require {ProgramParticipation}.[ProgramEligibilityParticipation] = '9130'
	else 'When this component is reported in the Early Childhood Collection the Program Eligibility Participation code must be 9130 (immigrant).'
	
rule 219.317.18
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9120' then
	expect count({ProgramParticipation} when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9130') >= '1'
	else 'Students participating in an International Student program may also be noted as participating in the Immigrant program.'

rule 219.317.19
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9222'
	and collection is in [FallGeneralCollection,SpringGeneralCollection,EOYGeneralCollection,StudentRecordMaintenance] then
	require {EEM}.[SFNEducationalSetting] = 'PCE'
	else 'Only schools with an EEM educational setting of "Sec. 6(4)(l)(ii) Pupil Count Exception" can submit program participation code 9222.'
	
rule 219.317.20
	when {ProgramParticipation}.[ProgramEligibilityParticipation] = '9222'
	and {Enrollment}.[DistrictExitStatus] = '19' then
	require years since {PersonalCore}.[DateOfBirth] as of 1-Sep < '22'
	else 'This exception may only be reported for students less than 22 years old as of September 1 of the current school year.'
